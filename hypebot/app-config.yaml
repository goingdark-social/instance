apiVersion: v1
kind: ConfigMap
metadata:
  name: hypebot-config
  namespace: hypebot
data:
  config.yaml: |
    # Refresh interval in minutes
    interval: 30
    
    # Text to add to the bot profile before the list of subscribed servers
    profile_prefix: "Official hypebot for goingdark.social, automatically boosting top trending posts from selected Mastodon instances:"
    
    # profile fields to fill in
    fields:
      instance: https://goingdark.social
      code: "https://github.com/goingdark-social/hypebot"
      automation: "Runs every 30 minutes"
      about: "Boosts trending posts from curated instances"
    
    # Define subscribed instances and their individual limit (top n trending posts)
    # API caps at max 20 per instance
    subscribed_instances:
      infosec.exchange:
        limit: 5
      mastodon.social:
        limit: 4
      mas.to:
        limit: 5
      fosstodon.org:
        limit: 6
      floss.social:
        limit: 4
      ioc.exchange:
        limit: 3
      mstdn.social:
        limit: 2
        
    # Posts originating from filtered instances will never be reposted.
    # The filter checks for the instance of the original posting account, not the
    # server that marked it as a popular post.
    # This can be used to filter out abusive instances as well as protect small
    # instances who could be overwhelmed with a repost to a significant amount of
    # other instances
    filtered_instances:
      - example.com
    
    # Boosting limits
    daily_public_cap: 96
    per_hour_public_cap: 5
    max_boosts_per_run: 5
    max_boosts_per_author_per_day: 1
    author_diversity_enforced: true
    
    # Post scoring
    prefer_media: 0
    require_media: false
    skip_sensitive_without_cw: true
    min_reblogs: 10
    min_favourites: 10
    languages_allowlist:
      - en
    
    # State persistence
    state_path: "/app/secrets/state.json"
    seen_cache_size: 6000
    
    # Hashtag scoring
    hashtag_scores:
      homelab: 20
      selfhosted: 15
      privacy: 10
      security: 10
      cybersecurity: 10
      kubernetes: 15
      docker: 15
    
    # Debug logging configuration
    debug_decisions: true
    log_level: "DEBUG"
    # logfile_path: "/app/logs/hypebot.log"

